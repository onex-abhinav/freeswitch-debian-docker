<configuration name="amqp.conf" description="mod_amqp">
  <producers>
    <profile name="hangup">
      <connections>
        <connection name="primary">
          <param name="hostname" value="10.30.40.77"/>
          <param name="virtualhost" value="/"/>
          <param name="username" value="admin"/>
          <param name="password" value="Rabbit@1234"/>
          <param name="port" value="5672"/>
          <param name="heartbeat" value="0"/>
        </connection>
      </connections>
      <params>
        <param name="exchange-name" value="freeswitch.hangup"/>
        <param name="exchange-type" value="fanout"/>
        <param name="reconnect_interval_ms" value="1000"/>
        <param name="send_queue_size" value="5000"/>
        
        <!-- Listen for channel hangup complete events -->
        <param name="event_filter" value="SWITCH_EVENT_CHANNEL_HANGUP_COMPLETE"/>
        
        <!-- Simple message format -->
        <param name="format_fields" value="#CallEnded"/>
      </params>
    </profile>
  </producers>
</configuration>